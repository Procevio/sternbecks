<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spr√∂js Validering Test - Sternbecks</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-case { 
            border: 1px solid #ddd; 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 5px; 
            background: #f8f9fa;
        }
        .test-case h3 { margin-top: 0; color: #2c5aa0; }
        .scenario { background: #fff; padding: 10px; margin: 10px 0; border-radius: 3px; }
        .expected { color: #28a745; font-weight: bold; margin: 5px 0; }
        .error-case { border-color: #dc3545; background: #f8d7da; }
        .success-case { border-color: #28a745; background: #d4edda; }
        .validation-msg { font-family: monospace; background: #f1f3f4; padding: 8px; margin: 5px 0; }
        .error { color: #dc3545; }
        .success { color: #28a745; }
    </style>
</head>
<body>
    <h1>üß™ Spr√∂js Validering Test</h1>
    <p>Testar att "F√∂nster med spr√∂js" inte kan √∂verstiga "F√∂nsterpartier".</p>
    
    <div style="background: #e7f3ff; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 4px solid #2c5aa0;">
        <h4>üéØ Ny Validering:</h4>
        <ul>
            <li><strong>Regel:</strong> Antal f√∂nster med spr√∂js ‚â§ Antal f√∂nsterpartier</li>
            <li><strong>Prioritet:</strong> Spr√∂js-validering k√∂rs f√∂re luftare-validering</li>
            <li><strong>Realtid:</strong> Validering k√∂rs vid varje f√§lt√§ndring</li>
            <li><strong>Submit-blockering:</strong> Formul√§r kan inte skickas vid fel</li>
        </ul>
    </div>

    <div class="test-case success-case">
        <h3>‚úÖ Test 1: Giltig Konfiguration</h3>
        <div class="scenario">
            ‚Ä¢ <strong>F√∂nsterpartier:</strong> 5<br>
            ‚Ä¢ <strong>Spr√∂js:</strong> Ja<br>
            ‚Ä¢ <strong>F√∂nster med spr√∂js:</strong> 3<br>
            ‚Ä¢ <strong>Luftare totalt:</strong> 5 (matchar f√∂nsterpartier)
        </div>
        <div class="expected">F√∂rv√§ntat resultat:</div>
        <div class="validation-msg success">‚úì Antal luftare (5) matchar antal f√∂nsterpartier (5) ‚Ä¢ Spr√∂js p√• 3 f√∂nster ‚úì</div>
    </div>

    <div class="test-case error-case">
        <h3>‚ùå Test 2: Ogiltigt - F√∂r m√•nga spr√∂js-f√∂nster</h3>
        <div class="scenario">
            ‚Ä¢ <strong>F√∂nsterpartier:</strong> 4<br>
            ‚Ä¢ <strong>Spr√∂js:</strong> Ja<br>
            ‚Ä¢ <strong>F√∂nster med spr√∂js:</strong> 6 <em>(mer √§n f√∂nsterpartier!)</em><br>
            ‚Ä¢ <strong>Luftare totalt:</strong> 4
        </div>
        <div class="expected">F√∂rv√§ntat resultat:</div>
        <div class="validation-msg error">F√∂nster med spr√∂js (6) kan inte √∂verstiga antal f√∂nsterpartier (4)</div>
    </div>

    <div class="test-case success-case">
        <h3>‚úÖ Test 3: Gr√§nsfall - Lika m√•nga</h3>
        <div class="scenario">
            ‚Ä¢ <strong>F√∂nsterpartier:</strong> 3<br>
            ‚Ä¢ <strong>Spr√∂js:</strong> Ja<br>
            ‚Ä¢ <strong>F√∂nster med spr√∂js:</strong> 3 <em>(samma som f√∂nsterpartier)</em><br>
            ‚Ä¢ <strong>Luftare totalt:</strong> 3
        </div>
        <div class="expected">F√∂rv√§ntat resultat:</div>
        <div class="validation-msg success">‚úì Antal luftare (3) matchar antal f√∂nsterpartier (3) ‚Ä¢ Spr√∂js p√• 3 f√∂nster ‚úì</div>
    </div>

    <div class="test-case success-case">
        <h3>‚úÖ Test 4: Spr√∂js inaktivt</h3>
        <div class="scenario">
            ‚Ä¢ <strong>F√∂nsterpartier:</strong> 4<br>
            ‚Ä¢ <strong>Spr√∂js:</strong> Nej<br>
            ‚Ä¢ <strong>F√∂nster med spr√∂js:</strong> 0 <em>(automatiskt nollst√§llt)</em><br>
            ‚Ä¢ <strong>Luftare totalt:</strong> 4
        </div>
        <div class="expected">F√∂rv√§ntat resultat:</div>
        <div class="validation-msg success">‚úì Antal luftare (4) matchar antal f√∂nsterpartier (4)</div>
    </div>

    <div class="test-case error-case">
        <h3>‚ùå Test 5: Kombinerat fel - Spr√∂js prioriteras</h3>
        <div class="scenario">
            ‚Ä¢ <strong>F√∂nsterpartier:</strong> 3<br>
            ‚Ä¢ <strong>Spr√∂js:</strong> Ja<br>
            ‚Ä¢ <strong>F√∂nster med spr√∂js:</strong> 5 <em>(f√∂r m√•nga!)</em><br>
            ‚Ä¢ <strong>Luftare totalt:</strong> 7 <em>(matchar inte heller)</em>
        </div>
        <div class="expected">F√∂rv√§ntat resultat (spr√∂js-fel visas f√∂rst):</div>
        <div class="validation-msg error">F√∂nster med spr√∂js (5) kan inte √∂verstiga antal f√∂nsterpartier (3)</div>
        <p><small><em>üí° Luftare-validering k√∂rs efter att spr√∂js-felet fixats</em></small></p>
    </div>

    <div class="test-case success-case">
        <h3>‚úÖ Test 6: Tomma v√§rden</h3>
        <div class="scenario">
            ‚Ä¢ <strong>F√∂nsterpartier:</strong> 0 eller tomt<br>
            ‚Ä¢ <strong>Spr√∂js:</strong> Nej<br>
            ‚Ä¢ <strong>F√∂nster med spr√∂js:</strong> 0<br>
            ‚Ä¢ <strong>Luftare totalt:</strong> 0
        </div>
        <div class="expected">F√∂rv√§ntat resultat:</div>
        <div class="validation-msg">Inget valideringsmeddelande visas (alla f√§lt tomma/noll)</div>
    </div>

    <div style="margin-top: 30px; padding: 20px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 5px;">
        <h2>üìã Manual Test Checklista</h2>
        <p>F√∂r att testa i appen:</p>
        <ol>
            <li><strong>Logga in</strong> i Sternbecks anbudsapp</li>
            <li><strong>Ange f√∂nsterpartier:</strong> t.ex. 3</li>
            <li><strong>Ange luftare:</strong> samma antal f√∂r att passera luftare-validering</li>
            <li><strong>V√§lj spr√∂js:</strong> "Ja"</li>
            <li><strong>Testa ogiltig:</strong> Ange f√∂nster med spr√∂js > f√∂nsterpartier</li>
            <li><strong>Kontrollera:</strong> R√∂tt felmeddelande visas, submit-knapp inaktiverad</li>
            <li><strong>Korrigera:</strong> Minska spr√∂js-f√∂nster ‚â§ f√∂nsterpartier</li>
            <li><strong>Kontrollera:</strong> Gr√∂nt framg√•ngsmeddelande, submit-knapp aktiv</li>
        </ol>
    </div>

    <div style="margin-top: 20px; padding: 15px; background: #d1ecf1; border: 1px solid #bee5eb; border-radius: 5px;">
        <h3>üîß Teknisk Implementation</h3>
        <div style="font-family: monospace; background: #f8f9fa; padding: 10px; margin: 10px 0;">
            <strong>validateParties():</strong><br>
            1. Kontrollera spr√∂js-validering f√∂rst<br>
            2. if (windowsWithSprojs > windowSections) ‚Üí ERROR<br>
            3. Sedan luftare-validering<br>
            4. if (totalLuftare !== windowSections) ‚Üí ERROR<br>
            5. Visa framg√•ngsmeddelande med b√•da ‚úì
        </div>
        
        <p><strong>Event listeners:</strong> Finns redan p√• <code>antal_fonster_med_sprojs</code> i <code>priceAffectingFields</code></p>
        <p><strong>Submit-blockering:</strong> <code>this.submitBtn.disabled = true</code> vid valideringsfel</p>
    </div>
</body>
</html>